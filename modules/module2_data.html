<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Matrices and Arrays</title>

<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 12px;
   margin: 8px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 { 
   font-size:2.2em; 
}

h2 { 
   font-size:1.8em; 
}

h3 { 
   font-size:1.4em; 
}

h4 { 
   font-size:1.0em; 
}

h5 { 
   font-size:0.9em; 
}

h6 { 
   font-size:0.8em; 
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre {	
   margin-top: 0;
   max-width: 95%;
   border: 1px solid #ccc;
   white-space: pre-wrap;
}

pre code {
   display: block; padding: 0.5em;
}

code.r, code.cpp {
   background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * { 
      background: transparent !important; 
      color: black !important; 
      filter:none !important; 
      -ms-filter: none !important; 
   }

   body { 
      font-size:12pt; 
      max-width:100%; 
   }
       
   a, a:visited { 
      text-decoration: underline; 
   }

   hr { 
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote { 
      padding-right: 1em; 
      page-break-inside: avoid; 
   }

   tr, img { 
      page-break-inside: avoid; 
   }

   img { 
      max-width: 100% !important; 
   }

   @page :left { 
      margin: 15mm 20mm 15mm 10mm; 
   }
     
   @page :right { 
      margin: 15mm 10mm 15mm 20mm; 
   }

   p, h2, h3 { 
      orphans: 3; widows: 3; 
   }

   h2, h3 { 
      page-break-after: avoid; 
   }
}
</style>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: rgb(88, 72, 246)
   }

   pre .number {
     color: rgb(0, 0, 205);
   }

   pre .comment {
     color: rgb(76, 136, 107);
   }

   pre .keyword {
     color: rgb(0, 0, 255);
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: rgb(3, 106, 7);
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>

<!-- MathJax scripts -->
<script type="text/javascript" src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


</head>

<body>
<h1>Matrices and Arrays</h1>

<p>Note to BB: remember to start recording.</p>

<p>Let&#39;s review matrices</p>

<ul>
<li>Matrices are two-dimensional collections of values of the same type</li>
<li>We can have numeric, integer, character, or logical matrices, character matrices.</li>
<li>You can&#39;t mix types within a matrix</li>
</ul>

<pre><code class="r">mat &lt;- matrix(rnorm(12), nrow = 3, ncol = 4)
mat
</code></pre>

<pre><code>##         [,1]    [,2]    [,3]    [,4]
## [1,]  0.5872 -1.1782  1.3072 -0.2861
## [2,]  0.9946 -0.1400 -0.6624  1.2640
## [3,] -1.4555  0.5503  0.4209 -0.3674
</code></pre>

<pre><code class="r">
# vectorized calcs work with matrices too
mat * 4
</code></pre>

<pre><code>##        [,1]    [,2]   [,3]   [,4]
## [1,]  2.349 -4.7126  5.229 -1.144
## [2,]  3.978 -0.5599 -2.650  5.056
## [3,] -5.822  2.2012  1.684 -1.470
</code></pre>

<pre><code class="r">mat &lt;- cbind(mat, 1:3)
mat
</code></pre>

<pre><code>##         [,1]    [,2]    [,3]    [,4] [,5]
## [1,]  0.5872 -1.1782  1.3072 -0.2861    1
## [2,]  0.9946 -0.1400 -0.6624  1.2640    2
## [3,] -1.4555  0.5503  0.4209 -0.3674    3
</code></pre>

<p>Arrays are like matrices but can have more or fewer than two dimensions.</p>

<pre><code class="r">arr &lt;- array(rnorm(12), c(2, 3, 4))
arr
</code></pre>

<pre><code>## , , 1
## 
##        [,1]    [,2]     [,3]
## [1,] -1.280  0.1234  0.06407
## [2,] -0.175 -1.4361 -1.48029
## 
## , , 2
## 
##        [,1]    [,2]     [,3]
## [1,] 0.2296  0.1599  0.05827
## [2,] 0.3107 -1.8740 -0.76463
## 
## , , 3
## 
##        [,1]    [,2]     [,3]
## [1,] -1.280  0.1234  0.06407
## [2,] -0.175 -1.4361 -1.48029
## 
## , , 4
## 
##        [,1]    [,2]     [,3]
## [1,] 0.2296  0.1599  0.05827
## [2,] 0.3107 -1.8740 -0.76463
</code></pre>

<h1>Attributes</h1>

<p>Objects have <em>attributes</em>.</p>

<pre><code class="r">attributes(mat)
</code></pre>

<pre><code>## $dim
## [1] 3 5
</code></pre>

<pre><code class="r">rownames(mat) &lt;- c(&quot;first&quot;, &quot;middle&quot;, &quot;last&quot;)
mat
</code></pre>

<pre><code>##           [,1]    [,2]    [,3]    [,4] [,5]
## first   0.5872 -1.1782  1.3072 -0.2861    1
## middle  0.9946 -0.1400 -0.6624  1.2640    2
## last   -1.4555  0.5503  0.4209 -0.3674    3
</code></pre>

<pre><code class="r">attributes(mat)
</code></pre>

<pre><code>## $dim
## [1] 3 5
## 
## $dimnames
## $dimnames[[1]]
## [1] &quot;first&quot;  &quot;middle&quot; &quot;last&quot;  
## 
## $dimnames[[2]]
## NULL
</code></pre>

<pre><code class="r">
mat[4]
</code></pre>

<pre><code>## [1] -1.178
</code></pre>

<pre><code class="r">attributes(mat)$dim &lt;- NULL
</code></pre>

<pre><code>## Error: &#39;dimnames&#39; applied to non-array
</code></pre>

<pre><code class="r">mat
</code></pre>

<pre><code>##           [,1]    [,2]    [,3]    [,4] [,5]
## first   0.5872 -1.1782  1.3072 -0.2861    1
## middle  0.9946 -0.1400 -0.6624  1.2640    2
## last   -1.4555  0.5503  0.4209 -0.3674    3
</code></pre>

<pre><code class="r">is.matrix(mat)
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<p>What can you infer about what a matrix is in R?</p>

<p>What kind of object are the attributes themselves? How do I check?</p>

<h1>Matrices are stored column-major</h1>

<p>This is like Fortran but not like C. </p>

<pre><code class="r">mat &lt;- matrix(1:12, 3, 4)
mat
</code></pre>

<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    4    7   10
## [2,]    2    5    8   11
## [3,]    3    6    9   12
</code></pre>

<pre><code class="r">c(mat)
</code></pre>

<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12
</code></pre>

<p>You can go smoothly back and forth between a matrix (or an array) and a vector:</p>

<pre><code class="r">identical(mat, matrix(c(mat), 3, 4))
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<pre><code class="r">identical(mat, matrix(c(mat), 3, 4, byrow = TRUE))
</code></pre>

<pre><code>## [1] FALSE
</code></pre>

<p>This is a common cause of bugs!</p>

<h1>Missing values and other special values</h1>

<p>Since it was designed by statisticians, R handles missing value very well relative to other languages.</p>

<ul>
<li><code>NA</code> is a missing value</li>
</ul>

<pre><code class="r">vec &lt;- rnorm(12)
vec[c(3, 5)] &lt;- NA
vec
</code></pre>

<pre><code>##  [1]  0.6694  0.8623      NA  0.4507      NA  0.4999 -1.3394 -1.6569
##  [9] -0.3677 -0.2878 -0.0341 -1.2096
</code></pre>

<pre><code class="r">length(vec)
</code></pre>

<pre><code>## [1] 12
</code></pre>

<pre><code class="r">sum(vec)
</code></pre>

<pre><code>## [1] NA
</code></pre>

<pre><code class="r">sum(vec, na.rm = TRUE)
</code></pre>

<pre><code>## [1] -2.413
</code></pre>

<pre><code class="r">hist(vec)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-5"/> </p>

<pre><code class="r">is.na(vec)
</code></pre>

<pre><code>##  [1] FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
## [12] FALSE
</code></pre>

<p>Be careful because many R functions won&#39;t warn you that they are ignoring the missing values.</p>

<ul>
<li>To infinity and beyond</li>
</ul>

<pre><code class="r">big &lt;- Inf
big
</code></pre>

<pre><code>## [1] Inf
</code></pre>

<pre><code class="r">big + 7
</code></pre>

<pre><code>## [1] Inf
</code></pre>

<ul>
<li><code>NaN</code> stands for Not a Number</li>
</ul>

<pre><code class="r">sqrt(-5)
</code></pre>

<pre><code>## Warning: NaNs produced
</code></pre>

<pre><code>## [1] NaN
</code></pre>

<pre><code class="r">big - big
</code></pre>

<pre><code>## [1] NaN
</code></pre>

<pre><code class="r">1/0
</code></pre>

<pre><code>## [1] Inf
</code></pre>

<ul>
<li><code>NULL</code></li>
</ul>

<pre><code class="r">vec &lt;- c(vec, NULL)
vec
</code></pre>

<pre><code>##  [1]  0.6694  0.8623      NA  0.4507      NA  0.4999 -1.3394 -1.6569
##  [9] -0.3677 -0.2878 -0.0341 -1.2096
</code></pre>

<pre><code class="r">length(vec)
</code></pre>

<pre><code>## [1] 12
</code></pre>

<pre><code class="r">a &lt;- NULL
a + 7
</code></pre>

<pre><code>## numeric(0)
</code></pre>

<pre><code class="r">a[3, 4]
</code></pre>

<pre><code>## NULL
</code></pre>

<pre><code class="r">is.null(a)
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<pre><code class="r">myList &lt;- list(a = 7, b = 5)
myList$a &lt;- NULL  # works for data frames too
myList
</code></pre>

<pre><code>## $b
## [1] 5
</code></pre>

<p><code>NA</code> can hold a place but <code>NULL</code> cannot.
<code>NULL</code> is useful for having a function argument default to &#39;nothing&#39;. See <code>help(crossprod)</code>, which can compute either \(X^{\top}X\) or \(X^{\top}Y\).  </p>

<h1>Logical vectors</h1>

<pre><code class="r">answers &lt;- c(TRUE, TRUE, FALSE, FALSE)
update &lt;- c(TRUE, FALSE, TRUE, FALSE)

answers &amp; update
</code></pre>

<pre><code>## [1]  TRUE FALSE FALSE FALSE
</code></pre>

<pre><code class="r">answers | update
</code></pre>

<pre><code>## [1]  TRUE  TRUE  TRUE FALSE
</code></pre>

<pre><code class="r"># note the vectorized boolean arithmetic

# what am I doing here?
sum(answers)
</code></pre>

<pre><code>## [1] 2
</code></pre>

<pre><code class="r">mean(answers)
</code></pre>

<pre><code>## [1] 0.5
</code></pre>

<pre><code class="r">answers + update
</code></pre>

<pre><code>## [1] 2 1 1 0
</code></pre>

<p>What do you think R is doing to do arithmetic on logical vectors?</p>

<p>Tricks with logicals&hellip;</p>

<pre><code class="r">identical(answers &amp; update, as.logical(answers * update))
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<pre><code class="r">identical(answers | update, as.logical(answers + update))
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<h1>Data frames</h1>

<p>A review from Module 1&hellip;</p>

<ul>
<li>Data frames are combinations of vectors of the same length, but can be of different types</li>
<li>Data frames are what is used for standard rectangular (record by field) datasets, similar to a spreadsheet</li>
<li>Data frames are a functionality that both sets R aside from some languages (e.g., Matlab) and provides functionality similar to some statistical packages (e.g., Stata, SAS)</li>
</ul>

<pre><code class="r">require(foreign)
vote = read.dta(&quot;../data/2004_labeled_processed_race.dta&quot;)
class(vote)
</code></pre>

<pre><code>## [1] &quot;data.frame&quot;
</code></pre>

<pre><code class="r">head(vote)
</code></pre>

<pre><code>##   state pres04    sex  race  age9 partyid income relign8 age60 age65
## 1     2      1 female white 25-29    &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt; 18-29 25-29
## 2     2      2   male white 18-24    &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt; 18-29 18-24
## 3     2      1 female black 30-39    &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt; 30-44 30-39
## 4     2      1 female black 30-39    &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt; 30-44 30-39
## 5     2      1 female white 40-44    &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt; 30-44 40-49
## 6     2      1 female white 30-39    &lt;NA&gt;   &lt;NA&gt;    &lt;NA&gt; 30-44 30-39
##   geocode sizeplac brnagain attend year region y
## 1       3    rural     &lt;NA&gt;   &lt;NA&gt; 2004      4 0
## 2       3    rural     &lt;NA&gt;   &lt;NA&gt; 2004      4 1
## 3       3    rural     &lt;NA&gt;   &lt;NA&gt; 2004      4 0
## 4       3    rural     &lt;NA&gt;   &lt;NA&gt; 2004      4 0
## 5       3    rural     &lt;NA&gt;   &lt;NA&gt; 2004      4 0
## 6       3    rural     &lt;NA&gt;   &lt;NA&gt; 2004      4 0
</code></pre>

<pre><code class="r">str(vote)
</code></pre>

<pre><code>## &#39;data.frame&#39;:    76205 obs. of  17 variables:
##  $ state   : int  2 2 2 2 2 2 2 2 2 2 ...
##  $ pres04  : int  1 2 1 1 1 1 1 2 2 2 ...
##  $ sex     : Factor w/ 2 levels &quot;male&quot;,&quot;female&quot;: 2 1 2 2 2 2 1 2 2 2 ...
##  $ race    : Factor w/ 5 levels &quot;white&quot;,&quot;black&quot;,..: 1 1 2 2 1 1 1 1 1 1 ...
##  $ age9    : Factor w/ 9 levels &quot;18-24&quot;,&quot;25-29&quot;,..: 2 1 3 3 4 3 4 1 2 1 ...
##  $ partyid : Factor w/ 4 levels &quot;democrat&quot;,&quot;republican&quot;,..: NA NA NA NA NA NA NA NA NA NA ...
##  $ income  : Factor w/ 8 levels &quot;under $15,000&quot;,..: NA NA NA NA NA NA NA NA NA NA ...
##  $ relign8 : Factor w/ 8 levels &quot;protestant&quot;,&quot;catholic&quot;,..: NA NA NA NA NA NA NA NA NA NA ...
##  $ age60   : Factor w/ 4 levels &quot;18-29&quot;,&quot;30-44&quot;,..: 1 1 2 2 2 2 2 1 1 1 ...
##  $ age65   : Factor w/ 6 levels &quot;18-24&quot;,&quot;25-29&quot;,..: 2 1 3 3 4 3 4 1 2 1 ...
##  $ geocode : int  3 3 3 3 3 3 3 3 3 3 ...
##  $ sizeplac: Factor w/ 5 levels &quot;city over 500,000&quot;,..: 5 5 5 5 5 5 5 5 5 5 ...
##  $ brnagain: Factor w/ 2 levels &quot;yes&quot;,&quot;no&quot;: NA NA NA NA NA NA NA NA NA NA ...
##  $ attend  : Factor w/ 6 levels &quot;more than once a week&quot;,..: NA NA NA NA NA NA NA NA NA NA ...
##  $ year    : num  2004 2004 2004 2004 2004 ...
##  $ region  : num  4 4 4 4 4 4 4 4 4 4 ...
##  $ y       : num  0 1 0 0 0 0 0 1 1 1 ...
##  - attr(*, &quot;datalabel&quot;)= chr &quot;&quot;
##  - attr(*, &quot;time.stamp&quot;)= chr &quot; 6 Jun 2007 14:53&quot;
##  - attr(*, &quot;formats&quot;)= chr  &quot;%8.0g&quot; &quot;%8.0g&quot; &quot;%8.0g&quot; &quot;%8.0g&quot; ...
##  - attr(*, &quot;types&quot;)= int  251 251 251 251 251 251 251 251 251 251 ...
##  - attr(*, &quot;val.labels&quot;)= chr  &quot;stanum&quot; &quot;presak04&quot; &quot;sex&quot; &quot;race&quot; ...
##  - attr(*, &quot;var.labels&quot;)= chr  &quot;state id&quot; &quot;in today&#39;s election for president, did you just vote for:&quot; &quot;are you:&quot; &quot;are you:&quot; ...
##  - attr(*, &quot;version&quot;)= int 8
##  - attr(*, &quot;label.table&quot;)=List of 14
##   ..$ stanum  : Named num 2
##   .. ..- attr(*, &quot;names&quot;)= chr &quot;alaska&quot;
##   ..$ presak04: Named num  0 1 2 3 9
##   .. ..- attr(*, &quot;names&quot;)= chr  &quot;did not vote&quot; &quot;kerry&quot; &quot;bush&quot; &quot;nader&quot; ...
##   ..$ sex     : Named num  1 2
##   .. ..- attr(*, &quot;names&quot;)= chr  &quot;male&quot; &quot;female&quot;
##   ..$ race    : Named num  1 2 3 4 5
##   .. ..- attr(*, &quot;names&quot;)= chr  &quot;white&quot; &quot;black&quot; &quot;hispanic/latino&quot; &quot;asian&quot; ...
##   ..$ age9    : Named num  1 2 3 4 5 6 7 8 9
##   .. ..- attr(*, &quot;names&quot;)= chr  &quot;18-24&quot; &quot;25-29&quot; &quot;30-39&quot; &quot;40-44&quot; ...
##   ..$ partyid : Named num  1 2 3 4
##   .. ..- attr(*, &quot;names&quot;)= chr  &quot;democrat&quot; &quot;republican&quot; &quot;independent&quot; &quot;something else&quot;
##   ..$ income  : Named num  1 2 3 4 5 6 7 8
##   .. ..- attr(*, &quot;names&quot;)= chr  &quot;under $15,000&quot; &quot;$15,000-$29,999&quot; &quot;$30,000-$49,999&quot; &quot;$50,000-$74,999&quot; ...
##   ..$ relign8 : Named num  1 2 3 4 5 6 7 8
##   .. ..- attr(*, &quot;names&quot;)= chr  &quot;protestant&quot; &quot;catholic&quot; &quot;mormon/lds&quot; &quot;other christian&quot; ...
##   ..$ age60   : Named num  1 2 3 4
##   .. ..- attr(*, &quot;names&quot;)= chr  &quot;18-29&quot; &quot;30-44&quot; &quot;45-59&quot; &quot;60 or over&quot;
##   ..$ age65   : Named num  1 2 3 4 5 6
##   .. ..- attr(*, &quot;names&quot;)= chr  &quot;18-24&quot; &quot;25-29&quot; &quot;30-39&quot; &quot;40-49&quot; ...
##   ..$ geocode : Named num  1 2 3
##   .. ..- attr(*, &quot;names&quot;)= chr  &quot;juneau/fairbanks/rural&quot; &quot;anchorage&quot; &quot;anchorage-fairbanks corridor&quot;
##   ..$ sizeplac: Named num  1 2 3 4 5
##   .. ..- attr(*, &quot;names&quot;)= chr  &quot;city over 500,000&quot; &quot;city: 50,000 to 500,000&quot; &quot;suburbs&quot; &quot;city: 10,000 to 49,999&quot; ...
##   ..$ brnagain: Named num  1 2
##   .. ..- attr(*, &quot;names&quot;)= chr  &quot;yes&quot; &quot;no&quot;
##   ..$ attend  : Named num  1 2 3 4 5 9
##   .. ..- attr(*, &quot;names&quot;)= chr  &quot;more than once a week&quot; &quot;once a week&quot; &quot;a few times a month&quot; &quot;a few times a year&quot; ...
</code></pre>

<h1>Data frames are (special) lists!</h1>

<pre><code class="r">is.list(vote)
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<pre><code class="r">length(vote)
</code></pre>

<pre><code>## [1] 17
</code></pre>

<pre><code class="r">vote[[3]][1:5]
</code></pre>

<pre><code>## [1] female male   female female female
## Levels: male female
</code></pre>

<pre><code class="r">lapply(vote, class)
</code></pre>

<pre><code>## $state
## [1] &quot;integer&quot;
## 
## $pres04
## [1] &quot;integer&quot;
## 
## $sex
## [1] &quot;factor&quot;
## 
## $race
## [1] &quot;factor&quot;
## 
## $age9
## [1] &quot;factor&quot;
## 
## $partyid
## [1] &quot;factor&quot;
## 
## $income
## [1] &quot;factor&quot;
## 
## $relign8
## [1] &quot;factor&quot;
## 
## $age60
## [1] &quot;factor&quot;
## 
## $age65
## [1] &quot;factor&quot;
## 
## $geocode
## [1] &quot;integer&quot;
## 
## $sizeplac
## [1] &quot;factor&quot;
## 
## $brnagain
## [1] &quot;factor&quot;
## 
## $attend
## [1] &quot;factor&quot;
## 
## $year
## [1] &quot;numeric&quot;
## 
## $region
## [1] &quot;numeric&quot;
## 
## $y
## [1] &quot;numeric&quot;
</code></pre>

<p><code>lapply()</code> is a function used on lists; it works here to apply the <code>class()</code> function to each element of the list, which in this case is each field/column.</p>

<h1>But lists are also vectors!</h1>

<pre><code class="r">length(vote)
</code></pre>

<pre><code>## [1] 17
</code></pre>

<pre><code class="r">someFields &lt;- vote[c(3, 5)]
head(someFields)
</code></pre>

<pre><code>##      sex  age9
## 1 female 25-29
## 2   male 18-24
## 3 female 30-39
## 4 female 30-39
## 5 female 40-44
## 6 female 30-39
</code></pre>

<pre><code class="r">identical(vote[c(3, 5)], vote[, c(3, 5)])
</code></pre>

<pre><code>## [1] TRUE
</code></pre>

<p>In general the placement of commas in R is crucial, but here, two different operations give the same result because of the underlying structure of data frames.</p>

<h1>Factors</h1>

<ul>
<li>A factor is a special and sometimes frustrating data type in R used for categorical data</li>
</ul>

<pre><code class="r">class(vote$sizeplac)
</code></pre>

<pre><code>## [1] &quot;factor&quot;
</code></pre>

<pre><code class="r">head(vote$sizeplac)  # What order are the factors in?
</code></pre>

<pre><code>## [1] rural rural rural rural rural rural
## 5 Levels: city over 500,000 city: 50,000 to 500,000 ... rural
</code></pre>

<pre><code class="r">levels(vote[[&quot;sizeplac&quot;]])
</code></pre>

<pre><code>## [1] &quot;city over 500,000&quot;       &quot;city: 50,000 to 500,000&quot;
## [3] &quot;suburbs&quot;                 &quot;city: 10,000 to 49,999&quot; 
## [5] &quot;rural&quot;
</code></pre>

<pre><code class="r">summary(vote$sizeplac)
</code></pre>

<pre><code>##       city over 500,000 city: 50,000 to 500,000                 suburbs 
##                    5882                   15462                   28796 
##  city: 10,000 to 49,999                   rural                    NA&#39;s 
##                    8449                   17501                     115
</code></pre>

<ul>
<li>What if we don&#39;t like the order these are in? Factor order is important for all kinds of things like plotting, analysis of variance, regression output, and more</li>
</ul>

<h1>Ordering the Factor</h1>

<ul>
<li>Ordered factors simply have an additional attribute explaining the order of the levels of a factor</li>
<li>This is a useful shortcut when we want to preserve some of the meaning provided by the order</li>
<li>Think ordinal data</li>
</ul>

<pre><code class="r">vote &lt;- within(vote, sizeplac_ord &lt;- ordered(sizeplac, levels = levels(sizeplac)[c(5, 
    3, 4, 2, 1)]))
head(vote$sizeplac_ord)
</code></pre>

<pre><code>## [1] rural rural rural rural rural rural
## 5 Levels: rural &lt; suburbs &lt; ... &lt; city over 500,000
</code></pre>

<pre><code class="r">levels(vote$sizeplac_ord)
</code></pre>

<pre><code>## [1] &quot;rural&quot;                   &quot;suburbs&quot;                
## [3] &quot;city: 10,000 to 49,999&quot;  &quot;city: 50,000 to 500,000&quot;
## [5] &quot;city over 500,000&quot;
</code></pre>

<p>Try to decipher what I just did with that complicated single line of code.</p>

<h1>Reclassifying Factors</h1>

<ul>
<li>Turning factors into other data types can be tricky. All factor levels have an underlying numeric structure.</li>
</ul>

<pre><code class="r">myfac &lt;- factor(c(&quot;basic&quot;, &quot;proficient&quot;, &quot;advanced&quot;, &quot;basic&quot;, &quot;advanced&quot;, &quot;minimal&quot;))
levels(myfac)
</code></pre>

<pre><code>## [1] &quot;advanced&quot;   &quot;basic&quot;      &quot;minimal&quot;    &quot;proficient&quot;
</code></pre>

<pre><code class="r">unclass(myfac)
</code></pre>

<pre><code>## [1] 2 4 1 2 1 3
## attr(,&quot;levels&quot;)
## [1] &quot;advanced&quot;   &quot;basic&quot;      &quot;minimal&quot;    &quot;proficient&quot;
</code></pre>

<ul>
<li>What&#39;s wrong?</li>
<li>Be careful! The best way to convert a factor is to convert it to a character first.</li>
</ul>

<pre><code class="r">myfac &lt;- factor(c(&quot;basic&quot;, &quot;proficient&quot;, &quot;advanced&quot;, &quot;basic&quot;, &quot;advanced&quot;, &quot;minimal&quot;))
score = c(minimal = 3, basic = 1, advanced = 13, proficient = 7)  # a named vector
score[&quot;advanced&quot;]  # look up by name
</code></pre>

<pre><code>## advanced 
##       13
</code></pre>

<pre><code class="r">myfac[3]
</code></pre>

<pre><code>## [1] advanced
## Levels: advanced basic minimal proficient
</code></pre>

<pre><code class="r">score[myfac[3]]
</code></pre>

<pre><code>## minimal 
##       3
</code></pre>

<pre><code class="r">score[as.character(myfac[3])]
</code></pre>

<pre><code>## advanced 
##       13
</code></pre>

<p>What&#39;s going wrong?</p>

<h1>Subsetting</h1>

<p>There are many ways to select subsets in R. The syntax below is useful for vectors, matrices, data frames, arrays and lists.</p>

<pre><code class="r">vec &lt;- rnorm(20)
mat &lt;- matrix(vec, 4, 5)
rownames(mat) &lt;- letters[1:4]
mat
</code></pre>

<pre><code>##      [,1]     [,2]    [,3]    [,4]     [,5]
## a -0.3112 -1.33090 -0.6350 -0.5241 -1.71910
## b -1.4120  2.11462  1.0845 -0.4235  0.61913
## c -1.7273 -0.28582  1.7979  1.5908  0.48541
## d  0.9401  0.01268 -0.2703  0.5060  0.09669
</code></pre>

<p>1) by direct indexing</p>

<pre><code class="r">vec[c(3, 5, 12:14)]
</code></pre>

<pre><code>## [1] -1.7273 -1.3309 -0.2703 -0.5241 -0.4235
</code></pre>

<pre><code class="r">vec[-c(3, 5)]
</code></pre>

<pre><code>##  [1] -0.31122 -1.41203  0.94013  2.11462 -0.28582  0.01268 -0.63495
##  [8]  1.08454  1.79794 -0.27027 -0.52412 -0.42352  1.59083  0.50596
## [15] -1.71910  0.61913  0.48541  0.09669
</code></pre>

<pre><code class="r">mat[c(2, 4), 5]
</code></pre>

<pre><code>##       b       d 
## 0.61913 0.09669
</code></pre>

<pre><code class="r">rowInd &lt;- c(1, 3, 4)
colInd &lt;- c(2, 2, 1)
mat[cbind(rowInd, colInd)]
</code></pre>

<pre><code>## [1] -1.3309 -0.2858  0.9401
</code></pre>

<p>Note the last usage where we give it a 2-column matrix of indices
2) by a vector of logicals</p>

<pre><code class="r">cond &lt;- vec &gt; 0
vec[cond]
</code></pre>

<pre><code>##  [1] 0.94013 2.11462 0.01268 1.08454 1.79794 1.59083 0.50596 0.61913
##  [9] 0.48541 0.09669
</code></pre>

<pre><code class="r">mat[mat[, 1] &gt; 0, ]
</code></pre>

<pre><code>## [1]  0.94013  0.01268 -0.27027  0.50596  0.09669
</code></pre>

<p>3) by a vector of names</p>

<pre><code class="r">mat[c(&quot;a&quot;, &quot;d&quot;, &quot;a&quot;), ]
</code></pre>

<pre><code>##      [,1]     [,2]    [,3]    [,4]     [,5]
## a -0.3112 -1.33090 -0.6350 -0.5241 -1.71910
## d  0.9401  0.01268 -0.2703  0.5060  0.09669
## a -0.3112 -1.33090 -0.6350 -0.5241 -1.71910
</code></pre>

<p>4) using <em>subset()</em></p>

<pre><code class="r">subset(mtcars, mpg &gt; 20)
</code></pre>

<pre><code>##                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4      21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag  21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
## Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
## Merc 230       22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
## Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
## Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
## Fiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
## Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2
</code></pre>

<h1>Assignment into subsets</h1>

<p>We can assign into subsets by using similar syntax, as we saw with vectors.</p>

<pre><code class="r">vec[c(3, 5, 12:14)] &lt;- 1:5
mat[2, 3:5] &lt;- rnorm(3)
mat[mat[, 1] &gt; 0, ] &lt;- -Inf
</code></pre>

<h1>Strings</h1>

<p>R has lots of functionality for character strings. Usually these are stored as vectors of strings, each with arbitrary length.</p>

<pre><code class="r">chars &lt;- c(&#39;hi&#39;, &#39;hallo&#39;, &quot;mother&#39;s&quot;, &#39;father\&#39;s&#39;, &quot;He said, \&quot;hi\&quot;&quot; )
length(chars)
</code></pre>

<pre><code>## [1] 5
</code></pre>

<pre><code class="r">nchar(chars)
</code></pre>

<pre><code>## [1]  2  5  8  8 13
</code></pre>

<pre><code class="r">paste(&quot;bill&quot;, &quot;clinton&quot;, sep = &quot; &quot;)  # paste together a set of strings
</code></pre>

<pre><code>## [1] &quot;bill clinton&quot;
</code></pre>

<pre><code class="r">paste(chars, collapse = &#39; &#39;)  # paste together things from a vector
</code></pre>

<pre><code>## [1] &quot;hi hallo mother&#39;s father&#39;s He said, \&quot;hi\&quot;&quot;
</code></pre>

<pre><code class="r">
strsplit(&quot;This is the R bootcamp&quot;, split = &quot; &quot;)
</code></pre>

<pre><code>## [[1]]
## [1] &quot;This&quot;     &quot;is&quot;       &quot;the&quot;      &quot;R&quot;        &quot;bootcamp&quot;
</code></pre>

<pre><code class="r">substring(chars, 2, 3)
</code></pre>

<pre><code>## [1] &quot;i&quot;  &quot;al&quot; &quot;ot&quot; &quot;at&quot; &quot;e &quot;
</code></pre>

<pre><code class="r">chars2 &lt;- chars
substring(chars2, 2, 3) &lt;- &quot;ZZ&quot;
chars2
</code></pre>

<pre><code>## [1] &quot;hZ&quot;              &quot;hZZlo&quot;           &quot;mZZher&#39;s&quot;        &quot;fZZher&#39;s&quot;       
## [5] &quot;HZZsaid, \&quot;hi\&quot;&quot;
</code></pre>

<p>We can search for patterns in character vectors and replace patterns (both vectorized!)</p>

<pre><code class="r">grep(&quot;ther&quot;, chars)
</code></pre>

<pre><code>## [1] 3 4
</code></pre>

<pre><code class="r">gsub(&quot;hi&quot;, &quot;Hi&quot;, chars)
</code></pre>

<pre><code>## [1] &quot;Hi&quot;              &quot;hallo&quot;           &quot;mother&#39;s&quot;        &quot;father&#39;s&quot;       
## [5] &quot;He said, \&quot;Hi\&quot;&quot;
</code></pre>

<h1>Regular expressions (regex or regexp)</h1>

<p>Some of you may be familiar with using <em>regular expressions</em>, which is functionality for doing sophisticated pattern matching and replacement with strings. <em>Python</em> and <em>Perl</em> are both used extensively for such text manipulation. </p>

<p>R has a full set of regular expression capabilities available through the <em>grep()</em>, <em>gregexpr()</em>, and <em>gsub()</em> functions (among others - many R functions will work with regular expressions).</p>

<p>You can basically do any regular expression/string manipulationsto in R, though the syntax may be a bit clunky at times.</p>

<h1>The working directory</h1>

<p>To read and write from R, you need to have a firm grasp of where in the computer&#39;s filesystem you are reading and writing from. </p>

<pre><code class="r">getwd()  # what directory will R look in?
</code></pre>

<pre><code>## [1] &quot;/accounts/gen/vis/paciorek/staff/workshops/r-bootcamp-2013/modules&quot;
</code></pre>

<pre><code class="r">setwd(&quot;~/Desktop/r-bootcamp-2013&quot;)  # change the working directory
setwd(&quot;/Users/paciorek/Desktop/tmp&quot;)  # absolute path
</code></pre>

<pre><code>## Error: cannot change working directory
</code></pre>

<pre><code class="r">getwd()
</code></pre>

<pre><code>## [1] &quot;/accounts/gen/vis/paciorek/Desktop/r-bootcamp-2013&quot;
</code></pre>

<pre><code class="r">setwd(&quot;../r-bootcamp-2013&quot;)  # relative path
</code></pre>

<p>Many errors and much confusion result from you and R not being on the same page in terms of where in the directory structure you are.</p>

<h1>Reading data into R</h1>

<p>The workhorse for reading into a data frame is <em>read.table()</em>, which allows any separator (CSV, tab-delimited, etc.). <em>read.csv()</em> is a special case of <em>read.table()</em> for CSV files.</p>

<pre><code class="r">rta &lt;- read.table(&quot;../data/RTAData.csv&quot;, sep = &quot;,&quot;, head = TRUE)
rta[1:5, 1:5]
</code></pre>

<pre><code>##               time X40010 X40015 X40020 X40025
## 1 2010-03-01 14:58    821    209    828    258
## 2 2010-03-01 15:01    804    209    804    248
## 3 2010-03-01 15:04    892    212    801    237
## 4 2010-03-01 15:07    857    214    821    243
## 5 2010-03-01 15:10    849    222    834    252
</code></pre>

<pre><code class="r">dim(rta)
</code></pre>

<pre><code>## [1] 120822     62
</code></pre>

<pre><code class="r"># great, we&#39;re all set, right?  Not so fast...
unlist(lapply(rta, class))[1:5]
</code></pre>

<pre><code>##     time   X40010   X40015   X40020   X40025 
## &quot;factor&quot; &quot;factor&quot; &quot;factor&quot; &quot;factor&quot; &quot;factor&quot;
</code></pre>

<pre><code class="r"># ?read.table
rta2 &lt;- read.table(&quot;../data/RTAData.csv&quot;, sep = &quot;,&quot;, head = TRUE, stringsAsFactors = FALSE)
rta2[3, 3]
</code></pre>

<pre><code>## [1] &quot;212&quot;
</code></pre>

<pre><code class="r">unlist(lapply(rta2, class))[1:5]
</code></pre>

<pre><code>##        time      X40010      X40015      X40020      X40025 
## &quot;character&quot; &quot;character&quot; &quot;character&quot; &quot;character&quot; &quot;character&quot;
</code></pre>

<pre><code class="r"># let&#39;s delve more deeply
levels(rta[, 2])[c(1:5, 3041:3044)]
</code></pre>

<pre><code>## [1] &quot;&quot;     &quot;1000&quot; &quot;1001&quot; &quot;1002&quot; &quot;1003&quot; &quot;997&quot;  &quot;998&quot;  &quot;999&quot;  &quot;x&quot;
</code></pre>

<pre><code class="r">rta3 &lt;- read.table(&quot;../data/RTAData.csv&quot;, sep = &quot;,&quot;, head = TRUE, stringsAsFactors = FALSE, 
    na.strings = c(&quot;NA&quot;, &quot;x&quot;))
unlist(lapply(rta3, class))[1:5]
</code></pre>

<pre><code>##        time      X40010      X40015      X40020      X40025 
## &quot;character&quot;   &quot;integer&quot;   &quot;integer&quot;   &quot;integer&quot;   &quot;integer&quot;
</code></pre>

<pre><code class="r">
# checking...
missing &lt;- which(rta[, 2] == &quot;&quot;)
missing[1:5]
</code></pre>

<pre><code>## [1] 1167 1168 1169 1170 1171
</code></pre>

<pre><code class="r">rta3[head(missing), ]
</code></pre>

<pre><code>##                  time X40010 X40015 X40020 X40025 X40030 X40035 X40040
## 1167 2010-03-04 01:16     NA     NA     NA     NA     NA     NA     NA
## 1168 2010-03-04 01:19     NA     NA     NA     NA     NA     NA     NA
## 1169 2010-03-04 01:22     NA     NA     NA     NA     NA     NA     NA
## 1170 2010-03-04 01:25     NA     NA     NA     NA     NA     NA     NA
## 1171 2010-03-04 01:28     NA     NA     NA     NA     NA     NA     NA
## 1172 2010-03-04 01:31     NA     NA     NA     NA     NA     NA     NA
##      X40045 X40050 X40055 X40060 X40065 X40070 X40075 X40080 X40085 X40090
## 1167     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1168     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1169     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1170     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1171     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1172     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
##      X40092 X40095 X40100 X40105 X40110 X40115 X40120 X40125 X40130 X40135
## 1167     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1168     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1169     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1170     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1171     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1172     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
##      X40140 X40145 X40150 X41010 X41015 X41020 X41025 X41030 X41035 X41040
## 1167     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1168     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1169     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1170     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1171     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1172     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
##      X41045 X41050 X41055 X41060 X41065 X41070 X41075 X41080 X41085 X41090
## 1167     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1168     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1169     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1170     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1171     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1172     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
##      X41095 X41100 X41105 X41110 X41115 X41120 X41125 X41130 X41135 X41140
## 1167     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1168     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1169     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1170     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1171     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
## 1172     NA     NA     NA     NA     NA     NA     NA     NA     NA     NA
##      X41145 X41150 X41155 X41160
## 1167     NA     NA     NA     NA
## 1168     NA     NA     NA     NA
## 1169     NA     NA     NA     NA
## 1170     NA     NA     NA     NA
## 1171     NA     NA     NA     NA
## 1172     NA     NA     NA     NA
</code></pre>

<p>It&#39;s good to first look at your data in plain text format outside of R and then to check it after you&#39;ve read it into R.</p>

<h1>Other ways to read data into R</h1>

<p>The <em>read.table()</em> family of functions just skims the surface of things&hellip;</p>

<p>1) You can also read in a file as vector of characters, one character string per line of the file, and then post-process it. 
2) You can read fixed width format (constant number of characters per field) with <em>read.fwf()</em></p>

<h1>Reading &#39;foreign&#39; format data</h1>

<p>We&#39;ve already seen an example of reading data produced by another statistical package with <code>read.dta</code>. There are a number of other formats that we can handle for either reading or writing. Let&#39;s see <code>library(help = foreign)</code>.</p>

<p>R can also read in (and write out) Excel files, netCDF files, HDF5 files, etc., in many cases through add-on packages from CRAN. </p>

<p>A pause for a (gentle) diatribe:</p>

<p>Please try to avoid using Excel files as a data storage format. It&#39;s proprietary, complicated (can have multiple sheets), allows a limited number of rows/columns, and files are not easily readable/viewable (unlike simple text files).</p>

<h1>Writing data out from R</h1>

<p>Here you have a number of options. </p>

<p>1) You can write out R objects to an R Data file, as we&#39;ve seen, using <em>save()</em> and <em>save.image()</em>.
2) You can use <em>write.csv()</em> and <em>write.table()</em> to write data frames/matrices to flat text files with delimiters such as comma and tab.
3) You can use <em>write()</em> to write out matrices in a simple flat text format.
4) You can use <em>cat()</em> to write to a file, while controlling the formatting to a fine degree.
5) You can write out in the various file formats mentioned on the previous slide</p>

<h1>Writing out plots and tables</h1>

<pre><code class="r">pdf(&quot;myplot.pdf&quot;, width = 7, height = 7)
x &lt;- rnorm(10)
y &lt;- rnorm(10)
plot(x, y)
dev.off()
</code></pre>

<pre><code>## pdf 
##   2
</code></pre>

<p><code>xtable()</code> formats tables for HTML and Latex (the default).</p>

<pre><code class="r">require(xtable)
print(xtable(table(vote$race, vote$pres04)), type = &quot;html&quot;)
</code></pre>

<pre><code>## &lt;!-- html table generated in R 3.0.1 by xtable 1.7-1 package --&gt;
## &lt;!-- Fri Aug 23 15:42:23 2013 --&gt;
## &lt;TABLE border=1&gt;
## &lt;TR&gt; &lt;TH&gt;  &lt;/TH&gt; &lt;TH&gt; 0 &lt;/TH&gt; &lt;TH&gt; 1 &lt;/TH&gt; &lt;TH&gt; 2 &lt;/TH&gt; &lt;TH&gt; 3 &lt;/TH&gt; &lt;TH&gt; 4 &lt;/TH&gt; &lt;TH&gt; 9 &lt;/TH&gt;  &lt;/TR&gt;
##   &lt;TR&gt; &lt;TD align=&quot;right&quot;&gt; white &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt; 111 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt; 26184 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt; 33045 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt; 417 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt;  14 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt; 409 &lt;/TD&gt; &lt;/TR&gt;
##   &lt;TR&gt; &lt;TD align=&quot;right&quot;&gt; black &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt;  18 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt; 6183 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt; 824 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt;  56 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt;   0 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt;  21 &lt;/TD&gt; &lt;/TR&gt;
##   &lt;TR&gt; &lt;TD align=&quot;right&quot;&gt; hispanic/latino &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt;   6 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt; 2665 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt; 1639 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt;  34 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt;   3 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt;  49 &lt;/TD&gt; &lt;/TR&gt;
##   &lt;TR&gt; &lt;TD align=&quot;right&quot;&gt; asian &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt;   0 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt; 626 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt; 384 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt;   7 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt;   1 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt;   2 &lt;/TD&gt; &lt;/TR&gt;
##   &lt;TR&gt; &lt;TD align=&quot;right&quot;&gt; other &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt;  16 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt; 1036 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt; 653 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt;  22 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt;   0 &lt;/TD&gt; &lt;TD align=&quot;right&quot;&gt;  32 &lt;/TD&gt; &lt;/TR&gt;
##    &lt;/TABLE&gt;
</code></pre>

<p>Recall our discussion of the <code>summary()</code> function used on either a vector or a regression object. What do you think is going on with call to <code>print()</code> above? </p>

<h1>Breakout</h1>

<ol>
<li><p>Using the presidential preference dataset, create a new column based on <em>age9</em> that gives, as a numeric value, the midpoint of the age range assigned to each person. Try to do this with a combination of subsetting and string operations (i.e., can you convert the character numbers to actual numbers). To simplify things, feel free to get rid of the rows for ages &ldquo;75 and over&rdquo;.</p></li>
<li><p>Go back to slide 6 on logical vectors and figure out what is going on in the last few lines of code.</p></li>
<li><p>Go back to slide 22 and figure out what is going on with that complicated last line of code.</p></li>
</ol>

</body>

</html>
